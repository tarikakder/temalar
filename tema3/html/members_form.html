<div class="Box Box--form Sign">

	<h1 class="contentHeader pageViewHeader">{$contentHeader|display_text}</h1>

	<div class="Sign-wrapper">
	<div class="Sign-content">
		{if $error}
		<div class="alert alert-danger">{$LANG.validation_general}</div>
		{/if}
		<form action="{create_link transfer=get}" method="post">
			<input type="hidden" id="mmb_id" name="mmb_id" value="{$row.mmb_id|escape}" />

			<div class="form_table Sign-form">

				{if !isUserLogin()}
				<div class="form-group">
			    <input class="form-control" placeholder="{$LANG.label_mmb_email}" required="required" type="email" name="mmb_email" id="mmb_email" value="{$row.mmb_email|escape}">
			    {if $error.mmb_email}<div class="invalid-feedback">{$error.mmb_email}</div>{/if}
			  </div>
				{else}
				<div class="form-group">
			    <input type="hidden" name="mmb_email" id="mmb_email" value="{$row.mmb_email|escape}">
			  </div>
				{/if}

				{if !isUserLogin()}
				<div class="form-group">
          <div><small>{$LANG.validation_mmb_new_password_special_chars}</small></div>
			    <input placeholder="{$LANG.label_mmb_password}" class="form-control" type="password" required="required" name="mmb_password" id="mmb_password" value="{$row.mmb_password|escape}">
			    {if $error.mmb_password}<div class="invalid-feedback">{$error.mmb_password}</div>{/if}
			  </div>
			  <div class="form-group">
			    <input placeholder="{$LANG.label_mmb_password2}" class="form-control" type="password" required="required" name="mmb_password2" id="mmb_password2" value="{$row.mmb_password2|escape}">
			  </div>
				{/if}

				<div class="form-group">
			    <input placeholder="{$LANG.label_mmb_name}" class="form-control" type="text" required="required" name="mmb_name" id="mmb_name" value="{$row.mmb_name|escape}" />
			    {if $error.mmb_name}<div class="invalid-feedback">{$error.mmb_name}</div>{/if}
			  </div>

				{if $config.member_form_fields.mmb_birthdate.show}
				<div class="form-group">
					<div class="form-group-date">
						<select class="form-control" name="mmb_birthdate[d]" id="day" {if $config.member_form_fields.mmb_birthdate.required}required="required"{/if}>
							<option value="">{$LANG.label_date_day}</option>
							{html_options options=$select_options.days selected=$row.mmb_birthdate.d|escape}
						</select>
						<select class="form-control" name="mmb_birthdate[m]" id="month" {if $config.member_form_fields.mmb_birthdate.required}required="required"{/if}>
							<option value="">{$LANG.label_date_month}</option>
							{html_options options=$select_options.months selected=$row.mmb_birthdate.m|escape}
						</select>
						<select class="form-control" name="mmb_birthdate[y]" id="year" {if $config.member_form_fields.mmb_birthdate.required}required="required"{/if}>
							<option value="">{$LANG.label_date_year}</option>
							{html_options options=$select_options.years selected=$row.mmb_birthdate.y|escape}
						</select>
					</div>
					{if $error.mmb_birthdate}<div class="invalid-feedback">{$error.mmbmmb_birthdate_name}</div>{/if}
				</div>
				{/if}

				{if $config.member_form_fields.mmb_gender.show}
				<div class="form-group">
					<select class="form-control" name="mmb_gender" id="mmb_gender" {if $config.member_form_fields.mmb_gender.required}required="required"{/if}>
						{html_options options=$LANG.arr_genders selected=$row.mmb_gender|escape}
					</select>
					{if $error.mmb_gender}<div class="invalid-feedback">{$error.mmb_gender}</div>{/if}
				</div>
				{/if}

				{if $config.member_form_fields.mmb_cellphone.show}
				<div class="form-group">
					<input placeholder="{$LANG.label_mmb_cellphone}" class="form-control" type="text" name="mmb_cellphone" id="mmb_cellphone" maxlength="30" value="{$row.mmb_cellphone|escape}" {if $config.member_form_fields.mmb_field1.required}required="required"{/if}  />
					{if $error.mmb_cellphone}<div class="invalid-feedback">{$error.mmb_cellphone}</div>{/if}
				</div>
				{/if}
				{if $config.member_form_fields.mmb_job_id.show}
				<div class="form-group">
					<select class="form-control" name="mmb_job_id" id="mmb_job_id" {if $config.member_form_fields.mmb_job_id.required}required="required"{/if}>
						<option value="">{$LANG.label_please_select}</option>
						{html_options options=$select_options.jobs selected=$row.mmb_job_id|escape}
					</select>
					{if $error.mmb_job_id}<div class="invalid-feedback">{$error.mmb_job_id}</div>{/if}
				</div>
				{/if}
        
 				{if $config.member_form_fields.mmb_website.show}
				<div class="form-group">
					<input placeholder="{$LANG.label_mmb_website}" class="form-control" type="text" name="mmb_website" id="mmb_website" maxlength="100" value="{$row.mmb_website|escape}" {if $config.member_form_fields.mmb_website.required}required="required"{/if} />
					{if $error.mmb_website}<div class="invalid-feedback">{$error.mmb_website}</div>{/if}
				</div>
				{/if}
				{if $config.member_form_fields.mmb_field1.show}
				<div class="form-group">
					<input placeholder="{$LANG.label_mmb_field1}" class="form-control" type="text" name="mmb_field1" id="mmb_field1" maxlength="100" value="{$row.mmb_field1|escape}" {if $config.member_form_fields.mmb_field1.required}required="required"{/if} />
					{if $error.mmb_field1}<div class="invalid-feedback">{$error.mmb_field1}</div>{/if}
				</div>
				{/if}
				{if $config.member_form_fields.mmb_field2.show}
				<div class="form-group">
					<input placeholder="{$LANG.label_mmb_field2}" class="form-control" type="text" name="mmb_field2" id="mmb_field2" maxlength="100" value="{$row.mmb_field2|escape}" {if $config.member_form_fields.mmb_field2.required}required="required"{/if} />
					{if $error.mmb_field2}<div class="invalid-feedback">{$error.mmb_field2}</div>{/if}
				</div>
				{/if}
				{if $config.member_form_fields.mmb_field3.show}
				<div class="form-group">
					<input placeholder="{$LANG.label_mmb_field3}" class="form-control" type="text" name="mmb_field3" id="mmb_field3" maxlength="100" value="{$row.mmb_field3|escape}" {if $config.member_form_fields.mmb_field3.required}required="required"{/if}  />
					{if $error.mmb_field3}<div class="invalid-feedback">{$error.mmb_field3}</div>{/if}
				</div>
				{/if} 



        {* b2b ler icin uyelikte adres bilgilerinin istenmesi *}
        {if !isUserLogin()}
        {if $smarty.get.adr}      		
          <input type="hidden" name="addres_required_control" id="addres_required_control" value="1" />
          <input type="hidden" name="mmb_ref_code" id="mmb_ref_code" value="{$config.register_with_adr_ref_code}" />
          <div class="form-group show_corp">
            <label for="adr_firm_name">{$LANG.label_adr_firm_name} : </label>
            <input class="form-control input_xl inp_adr_firm_name" type="text" name="adr_firm_name" id="adr_firm_name" maxlength="255" value="{$row.adr_firm_name|escape}"  />
            {if $error.adr_firm_name}<div class="invalid-feedback">{$error.adr_firm_name}</div>{/if}
          </div>	
          
          <div class="form-group">
            <label for="adr_address">{$LANG.label_adr_address} <span class="required_star">*</span> : </label>
            <textarea required="required" class="form-control input_xl" type="text" name="adr_address" id="adr_address">{$row.adr_address|escape}</textarea>
            {if $error.adr_address}<div class="invalid-feedback">{$error.adr_address}</div>{/if}
          </div>		
            
          
          <div class="form-group items_col items_col3">
            <label for="adr_country_id">{$LANG.label_adr_country_id} <span class="required_star">*</span>: </label>
            <select required="required" onchange="loadComboBox('adr_city_id','{create_link p=Cities  no_common=1 opts=''}'+this.value,this.value);" class="form-control" name="adr_country_id" id="adr_country_id"><option value="">{$LANG.label_please_select}</option>{html_options options=$select_options.countries selected=$row.adr_country_id}</select>
            {if $error.adr_country_id}<div class="invalid-feedback">{$error.adr_country_id}</div>{/if}
          </div>
          
          
          <div class="form-group items_col items_col3">
            <label for="adr_city_id">{$LANG.label_adr_city_id} <span class="required_star">*</span>: </label>
            {if $config.adr_city_text}
            <input type="text" required="required" class="form-control" name="adr_city" id="adr_city" value="{$select_options.cities[$row.adr_city_id]}" />
            {else}
            <select required="required" onchange="loadComboBox('adr_town_id','{create_link p=Towns  no_common=1 opts=''}'+this.value,this.value);" class="form-control" name="adr_city_id" id="adr_city_id"><option value="">{$LANG.label_please_select}</option>{html_options options=$select_options.cities selected=$row.adr_city_id}</select>
            {/if}
            {if $error.adr_city_id}<div class="invalid-feedback">{$error.adr_city_id}</div>{/if}
         </div>
          
          
          <div class="form-group items_col items_col3 adr_town">
            <label for="adr_town_id">{$LANG.label_adr_town_id}: </label>
            {if $config.adr_town_text}
            <input type="text" class="form-control" name="adr_town" id="adr_town" value="{$select_options.towns[$row.adr_town_id]}" />
            {else}
            <select class="form-control" name="adr_town_id" id="adr_town_id"><option value="">{$LANG.label_please_select}</option>{html_options options=$select_options.towns selected=$row.adr_town_id}</select>
            {/if}
            {if $error.adr_town_id}<div class="invalid-feedback">{$error.adr_town_id}</div>{/if}
         </div>
          
        
          <div class="form-group items_col items_col2 form_row2 show_b show_corp2 adr_tax_office">
            <label for="adr_tax_office">{$LANG.label_adr_tax_office} : </label>
            <input class="form-control input_m" type="text" name="adr_tax_office" id="adr_tax_office" maxlength="32" value="{$row.adr_tax_office|escape}"  />
            {if $error.adr_tax_office}<div class="invalid-feedback">{$error.adr_tax_office}</div>{/if}
          </div>
          
          
          <div class="form-group items_col items_col2 show_b adr_tax_number">
            <label for="adr_tax_number">{$LANG.label_adr_tax_number} : </label>
            <input class="form-control input_m" type="text" name="adr_tax_number" id="adr_tax_number" maxlength="32" size="20" value="{$row.adr_tax_number|escape}"  />
            {if $error.adr_tax_number}<div class="invalid-feedback">{$error.adr_tax_number}</div>{/if}
          </div>
          
          {* adres form *}
        {/if}
        {/if}        
        

				{if !isUserLogin()}
					{if $config.cfg_enable_register_captha}
						{if $config.captcha_lib eq "recaptchav3"}
						<!-- google recaptcha v3 -->
						{elseif $config.captcha_lib!="recaptcha"}
							<div class="form_row form_row_captcha_image">
								<label>
									<a class="btn btn-orange" href="javascript:void(0);" onclick="$('#captcha_image').attr('src','{$smarty.const.CAPTCHA_URL}?v='+Math.random())">
										<i class="la la-sync"></i>
									</a>
								</label>
								<img width="{$config.captcha_width|default:150}" height="{$config.captcha_height|default:30}" id="captcha_image" src="{$smarty.const.CAPTCHA_URL}?v={$smarty.now}" alt="" />
							</div>
							<div class="form-group form_row_captcha">
								<label for="captcha_string">{$LANG.label_captcha_string}</label>
								<input placeholder="{$LANG.label_captcha}" required="required" class="form-control{if $error.captcha_string} is-invalid{/if}" type="text" name="captcha_string" id="captcha_string" value="">
								<div class="invalid-feedback">{$error.captcha_string}</div>
							</div>
						{else}
							<script src='https://www.google.com/recaptcha/api.js' async defer></script>
							<div class="error">{$error.captcha_string}</div>
							<div class="g-recaptcha" data-sitekey="{$config.recaptcha_site_key}"></div>
						{/if}
					{/if}
				{/if}

				
        {if $config.member_form_fields.mmb_ref_code.show and !$smarty.cookies.ref_code}
				<div class="form-group">
					<input class="form-control" maxlength="50" type="text" name="mmb_ref_code" id="mmb_ref_code" value="{$row.mmb_ref_code|escape}" placeholder="{$LANG.label_mmb_ref_code}" />
					{if $error.mmb_ref_code}<div class="invalid-feedback">{$error.mmb_ref_code}</div>{/if}
				</div>
				{/if}

				<div class="form-group form-check">
					<input class="form-check-input" type="checkbox" name="mmb_newsletter" id="mmb_newsletter" value="y" {if (!$row.mmb_newsletter && $config.cfg_newsletter_checked) or $row.mmb_newsletter eq 'y'}checked{/if}/>
					<label class="form-check-label" for="mmb_newsletter">{$LANG.label_mmb_newsletter}</label>
				</div>

				{if $config.sms_module}
				<div class="form-group form-check">
					<input class="form-check-input" type="checkbox" name="mmb_sms" id="mmb_sms" value="y" {if (!$row.mmb_sms && $config.cfg_sms_checked) or $row.mmb_sms eq 'y'}checked{/if}/>
					<label class="form-check-label" for="mmb_sms">{$LANG.label_mmb_sms}</label>
				</div>
				{/if}

				{if !isUserLogin()}
          {if $row.terms}       
            {if $error.cfg_terms_and_conds}<div class="invalid-feedback">{$error.cfg_terms_and_conds}</div>{/if}
            {foreach from=$row.terms item=term_item key=k}
            <div class="form-group form-check cfg_terms_and_conds">
              <input required="required" class="form-check-input" type="checkbox" name="cfg_terms_and_conds[{$term_item.pag_id}]" id="cfg_terms_and_conds{$term_item.pag_id}" {if $smarty.post.cfg_terms_and_conds}checked="checked"{/if} value="1" />
              <label class="form-check-label myPopupModal1ButtonM" data-toggle="modal" data-target="#termsPopupModal{$k}" style="text-align: left; cursor:pointer">						
                {$LANG.label_confirm_terms_and_conds|sprintf:$term_item.pag_name}
              </label>
            </div>    
            {/foreach}
          {/if}
				{/if}

				{if $config.captcha_lib eq "recaptchav3" && $error.captcha_string}<div class="invalid-feedback mb-2">{$error.captcha_string}</div>{/if}
				
				<input type="hidden" id="token" name="token">
				<input name="save" id="save_member" type="submit" class="btn btn-orange button_save button_member_save" value="{$LANG.button_save}">
				<!--<span class="required_fields_desc error">{$LANG.label_required_fields_desc}</span>-->
			</div>
		</form>
	</div>

	<div class="Sign-desc">
		{if !isUserLogin()}
    
	    {if $label_membership_desc}
			<div class="members_form_desc alert alert-warning">
				{$label_membership_desc}     
			</div>
	    {/if}
	    
	    {if $smarty.get.adr}
	    <div class="banner_mmb_form">{banner name="mmb_form_k"}</div>
	    {else}
	    <div class="banner_mmb_form">{banner name="mmb_form"}</div>
	    {/if}
    
		{/if}
		{if !isUserLogin()}
		<div class="members_form_social_links">
			{if $config.cfg_enable_facebook_login}
			<a class="button login_facebook" href="{$smarty.const.HTTP_HOST}extensions/facebook/index.php">{$LANG.label_connect_with_facebook}</a>
			{/if}

			{if $config.cfg_enable_twitter_login}
			<a class="button login_twitter" href="{$smarty.const.HTTP_HOST}extensions/twitter/redirect.php">{$LANG.label_connect_with_twitter}</a>
			{/if}

			{if $config.cfg_enable_google_login}
			<a class="button login_google" href="{$smarty.const.HTTP_HOST}extensions/google_api/index.php">{$LANG.label_connect_with_google}</a>
			{/if}
		</div>
		{/if}
	</div>
	</div>
</div>

{if $config.cfg_enable_register_captha && $config.captcha_lib eq "recaptchav3"}
<script src="https://www.google.com/recaptcha/api.js?render=6Ldegb0ZAAAAAALUmS0cEdEweah9WcXve5yXP4oy"></script>
{literal}
<script type="text/javascript">
	grecaptcha.ready(function() {
    grecaptcha.execute('6Ldegb0ZAAAAAALUmS0cEdEweah9WcXve5yXP4oy', {action: 'homepage'}).then(function(token) {
      document.getElementById("token").value = token;
    });
  });
</script>
{/literal}
{/if}

{include file="terms_popup.html"}